{% extends "base.html" %}

{% set current_step = 3 %}

{% block title %}Ã‰tape 3 - Choix de la Nuit - RandoVanGo{% endblock %}

{% block hero_subtitle %}Trouvez l'endroit parfait pour passer la nuit{% endblock %}

{% block planning_content %}
<div class="step-section">
    <div class="step-header">
        <h2>ğŸŒ™ Jour 1 : OÃ¹ dormir cette nuit ?</h2>
        <p>Choisissez votre hÃ©bergement pour terminer parfaitement cette premiÃ¨re journÃ©e</p>
    </div>

    <!-- Filtres d'hÃ©bergement -->
    <div class="accommodation-filters">
        <div class="filter-group">
            <label>Quand :</label>
            <button class="filter-btn active" data-filter="same-day">Le jour mÃªme</button>
            <button class="filter-btn" data-filter="night-before">La veille (J-1)</button>
        </div>
        <div class="filter-group">
            <label>Type :</label>
            <button class="filter-btn active" data-filter="camping">Camping</button>
            <button class="filter-btn" data-filter="bivouac">Bivouac</button>
            <button class="filter-btn" data-filter="camping-car">Aire de camping-car</button>
        </div>
    </div>
    <!-- Carte interactive -->
    <div class="map-page-container" style="margin: 2rem 0;">
        <h3 class="map-title">Visualisation sur la carte</h3>
        <div id="map" style="height: 40vh; width: 100%; border-radius: 12px; box-shadow: 0 2px 8px #0002;"></div>
    </div>
    <!-- Spots de bivouac -->
    <div class="spots-section" id="spotsSection" style="display: none;">
        <h3>Spots disponibles prÃ¨s de votre randonnÃ©e</h3>
        <div class="spots-list">
            <!-- Spot 1 -->
            <div class="spot-card" data-type="camping-car" data-timing="same-day">
                <div class="spot-content-grid">
                    <!-- Colonne gauche : Type + VÃ©rifiÃ© -->
                    <div class="spot-left">
                        <span class="hiking-stats"><span class="stat">Aire de camping-car</span></span>
                        <span class="status-badge verified">âœ… VÃ©rifiÃ©</span>
                    </div>
                    
                    <!-- Colonne centre : Infos bivouac -->
                    <div class="spot-center">
                        <h4>Aire CC de Plougonvelin</h4>
                        <p class="spot-description">Aire amÃ©nagÃ©e avec services complets, proche du centre-ville</p>
                        <div class="spot-features">
                            <span class="feature">ğŸ’§ Eau</span>
                            <span class="feature">ğŸš½ WC</span>
                            <span class="feature">âš¡ Ã‰lectricitÃ©</span>
                            <span class="feature">ğŸ›’ Commerces 500m</span>
                        </div>
                        <div class="spot-details">
                            <span class="price">ğŸ’° 12â‚¬/nuit</span>
                            <span class="distance">ğŸ“ 2.3 km du dÃ©part randonnÃ©e</span>
                        </div>
                    </div>
                    
                    <!-- Colonne droite : Boutons -->
                    <div class="spot-right">
                        <button class="btn btn-outline btn-sm" onclick="showSpotMap(1)">
                            <i class="fas fa-map"></i> Voir
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="selectSpot(1)">Choisir</button>
                    </div>
                </div>
            </div>

            <!-- Spot 2 -->
            <div class="spot-card" data-type="bivouac" data-timing="same-day">
                <div class="spot-content-grid">
                    <!-- Colonne gauche : Type + VÃ©rifiÃ© -->
                    <div class="spot-left">
                        <span class="hiking-stats"><span class="stat">Bivouac</span></span>
                        <span class="status-badge pending">âš ï¸ En attente</span>
                    </div>
                    
                    <!-- Colonne centre : Infos bivouac -->
                    <div class="spot-center">
                        <h4>Parking Fort de Bertheaume</h4>
                        <p class="spot-description">Vue exceptionnelle sur le fort, mais sans services</p>
                        <div class="spot-features">
                            <span class="feature disabled">âŒ Pas d'eau</span>
                            <span class="feature disabled">âŒ Pas de WC</span>
                            <span class="feature">ğŸŒ… Vue mer</span>
                            <span class="feature">ğŸ“¸ TrÃ¨s photogÃ©nique</span>
                        </div>
                        <div class="spot-details">
                            <span class="price">ğŸ’° Gratuit</span>
                            <span class="distance">ğŸ“ 1.8 km du dÃ©part randonnÃ©e</span>
                        </div>
                    </div>
                    
                    <!-- Colonne droite : Boutons -->
                    <div class="spot-right">
                        <button class="btn btn-outline btn-sm" onclick="showSpotMap(2)">
                            <i class="fas fa-map"></i> Voir
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="selectSpot(2)">Choisir</button>
                    </div>
                </div>
            </div>

            <!-- Spot 3 -->
            <div class="spot-card" data-type="camping" data-timing="same-day">
                <div class="spot-content-grid">
                    <!-- Colonne gauche : Type + VÃ©rifiÃ© -->
                    <div class="spot-left">
                        <span class="hiking-stats"><span class="stat">Camping</span></span>
                        <span class="status-badge verified">âœ… VÃ©rifiÃ©</span>
                    </div>
                    
                    <!-- Colonne centre : Infos bivouac -->
                    <div class="spot-center">
                        <h4>Camping de Porsmilin</h4>
                        <p class="spot-description">Camping familial face Ã  la plage, sanitaires propres</p>
                        <div class="spot-features">
                            <span class="feature">ğŸ’§ Eau chaude</span>
                            <span class="feature">ğŸš¿ Douches</span>
                            <span class="feature">ğŸ–ï¸ AccÃ¨s plage</span>
                            <span class="feature">ğŸ¥ DÃ©pÃ´t pain</span>
                        </div>
                        <div class="spot-details">
                            <span class="price">ğŸ’° 18â‚¬/nuit</span>
                            <span class="distance">ğŸ“ 3.1 km du dÃ©part randonnÃ©e</span>
                        </div>
                    </div>
                    
                    <!-- Colonne droite : Boutons -->
                    <div class="spot-right">
                        <button class="btn btn-outline btn-sm" onclick="showSpotMap(3)">
                            <i class="fas fa-map"></i> Voir
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="selectSpot(3)">Choisir</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Option hÃ©bergement personnel -->
    <div class="no-spot-option" id="noSpotCard">
        <button class="btn btn-primary no-spot-btn" onclick="selectNoSpot()">
            Autre hÃ©bergement (ami, hÃ´tel, chez soi...)
        </button>
    </div>
</div>
{% endblock %}

{% block navigation %}
<div class="navigation-buttons">
    <a href="{{ url_for('step2') }}" class="btn btn-outline">
        <i class="fas fa-arrow-left"></i>
        Ã‰tape prÃ©cÃ©dente
    </a>

    <a href="{{ url_for('step4') }}" class="btn btn-primary btn-large" id="nextStepBtn" style="display: none;">
        Ã‰tape suivante : Services
        <i class="fas fa-arrow-right"></i>
    </a>
</div>
{% endblock %}